<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Stop & Go Race</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Baloo+2:wght@400;700&display=swap" rel="stylesheet">
    <style>
      body {
        font-family: 'Baloo 2', sans-serif;
        user-select: none;
        margin: 0;
        background-color: #87CEEB; /* Sky Blue */
        overflow: hidden; /* Hide scrollbars */
      }
      @keyframes shield-pulse {
          0% { filter: drop-shadow(0 0 0 rgba(255, 255, 255, 0.7)); }
          50% { filter: drop-shadow(0 0 15px rgba(52, 152, 219, 0.9)); }
          100% { filter: drop-shadow(0 0 0 rgba(255, 255, 255, 0.7)); }
      }
      @keyframes slowed-pulse {
          0% { filter: drop-shadow(0 0 0 rgba(255, 255, 255, 0.7)); }
          50% { filter: drop-shadow(0 0 20px #F44336); }
          100% { filter: drop-shadow(0 0 0 rgba(255, 255, 255, 0.7)); }
      }
      @keyframes shake {
          0%, 100% { transform: translateX(0); }
          25% { transform: translateX(-10px) rotate(-5deg); }
          75% { transform: translateX(10px) rotate(5deg); }
      }
      @keyframes item-appear {
          from { transform: scale(0.5) translateX(-50%); opacity: 0; }
          to { transform: scale(1) translateX(-50%); opacity: 1; }
      }
      @keyframes item-disappear {
          from { transform: scale(1) translateX(-50%); opacity: 1; }
          to { transform: scale(0.5) translateX(-50%); opacity: 0; }
      }

      /* Ambient Cloud Drift */
      @keyframes cloud-drift {
        0% { transform: translateX(0) scale(var(--cloud-scale,1)); }
        50% { transform: translateX(15px) translateY(-3px) scale(var(--cloud-scale,1)); }
        100% { transform: translateX(0) scale(var(--cloud-scale,1)); }
      }

      /* Traffic Light Glow Pulse */
      @keyframes light-glow {
        0% { box-shadow: 0 0 8px var(--glow-color, transparent); }
        50% { box-shadow: 0 0 22px var(--glow-color, transparent); }
        100% { box-shadow: 0 0 8px var(--glow-color, transparent); }
      }

      /* Boost Speedlines */
      @keyframes speedlines-fade {
        0% { opacity: 0; transform: translate(-50%, -10px) scaleY(0.9); }
        20% { opacity: 1; }
        100% { opacity: 0; transform: translate(-50%, -25px) scaleY(1.1); }
      }
      .speedlines::before,
      .speedlines::after {
        content: "";
        position: absolute;
        left: 50%;
        transform: translateX(-50%);
        width: 28px;
        height: 50px;
        border-radius: 14px;
        background: linear-gradient(180deg, rgba(255,255,255,0.4), rgba(255,255,255,0));
        filter: blur(1px);
        animation: speedlines-fade 0.35s linear infinite;
        pointer-events: none;
      }
      .speedlines::after {
        width: 18px;
        height: 36px;
        animation-delay: 0.15s;
      }

      /* Frozen Frost Ring */
      @keyframes frost-ring {
        0% { box-shadow: 0 0 0 0 rgba(173,216,230,0.9); }
        50% { box-shadow: 0 0 18px 6px rgba(173,216,230,0.85); }
        100% { box-shadow: 0 0 0 0 rgba(173,216,230,0.9); }
      }
      .frost-ring {
        position: absolute;
        top: -6px;
        left: 50%;
        transform: translateX(-50%);
        width: 54px;
        height: 54px;
        border-radius: 9999px;
        border: 2px solid rgba(200, 240, 255, 0.9);
        backdrop-filter: blur(1px);
        animation: frost-ring 1.2s ease-in-out infinite;
        pointer-events: none;
      }

      /* Slow Mud Splash */
      @keyframes mud-splash {
        0% { transform: translate(-50%, 0) scale(0.95); opacity: 0.6; }
        50% { transform: translate(-50%, -4px) scale(1.05); opacity: 1; }
        100% { transform: translate(-50%, 0) scale(0.95); opacity: 0.6; }
      }
      .mud-splash {
        position: absolute;
        bottom: -6px;
        left: 50%;
        transform: translateX(-50%);
        width: 46px;
        height: 10px;
        background: radial-gradient(ellipse at center, rgba(110, 66, 28, 0.85), rgba(110,66,28,0.0) 70%);
        border-radius: 9999px;
        filter: blur(0.5px);
        animation: mud-splash 0.9s ease-in-out infinite;
        pointer-events: none;
      }

      /* Button Glow for GO */
      @keyframes button-glow {
        0% { box-shadow: 0 0 10px rgba(46, 204, 113, 0.6); }
        50% { box-shadow: 0 0 26px rgba(46, 204, 113, 0.95); }
        100% { box-shadow: 0 0 10px rgba(46, 204, 113, 0.6); }
      }
      .button-green-glow { animation: button-glow 1.2s ease-in-out infinite; }

      /* Sun pulse */
      @keyframes sun-pulse {
        0% { box-shadow: 0 0 0 0 rgba(255, 215, 0, 0.6); transform: scale(1); }
        50% { box-shadow: 0 0 35px 8px rgba(255, 215, 0, 0.9); transform: scale(1.03); }
        100% { box-shadow: 0 0 0 0 rgba(255, 215, 0, 0.6); transform: scale(1); }
      }
      .sun-pulse { animation: sun-pulse 2.5s ease-in-out infinite; }

      /* Hill gentle sway */
      @keyframes hill-sway {
        0%, 100% { transform: translateX(0); }
        50% { transform: translateX(6px); }
      }
      .hill-sway { animation: hill-sway 6s ease-in-out infinite; }

      /* Flag wave */
      @keyframes flag-wave {
        0% { transform: skewX(0deg); }
        50% { transform: skewX(-6deg); }
        100% { transform: skewX(0deg); }
      }
      .flag-wave { animation: flag-wave 1.2s ease-in-out infinite; transform-origin: left center; }

      /* Banner bounce */
      @keyframes banner-bounce {
        0%, 100% { transform: translate(-50%, 0); }
        50% { transform: translate(-50%, -6px); }
      }
      .banner-bounce { animation: banner-bounce 2s ease-in-out infinite; }

      /* Status Aura (positive/negative) */
      @keyframes aura-pulse-red {
        0% { box-shadow: 0 0 0 0 rgba(231, 76, 60, 0.55), inset 0 0 0 0 rgba(231, 76, 60, 0.25); }
        50% { box-shadow: 0 0 26px 6px rgba(231, 76, 60, 0.85), inset 0 0 8px 0 rgba(231, 76, 60, 0.25); }
        100% { box-shadow: 0 0 0 0 rgba(231, 76, 60, 0.55), inset 0 0 0 0 rgba(231, 76, 60, 0.25); }
      }
      @keyframes aura-pulse-blue {
        0% { box-shadow: 0 0 0 0 rgba(52, 152, 219, 0.55), inset 0 0 0 0 rgba(52, 152, 219, 0.25); }
        50% { box-shadow: 0 0 26px 6px rgba(52, 152, 219, 0.85), inset 0 0 8px 0 rgba(52, 152, 219, 0.25); }
        100% { box-shadow: 0 0 0 0 rgba(52, 152, 219, 0.55), inset 0 0 0 0 rgba(52, 152, 219, 0.25); }
      }
      .status-aura {
        position: absolute; top: -10px; left: 50%; transform: translateX(-50%);
        width: 60px; height: 60px; border-radius: 9999px; pointer-events: none;
        background: radial-gradient(circle, rgba(255,255,255,0.15) 0 30%, rgba(255,255,255,0) 60%);
      }
      .status-aura.red { animation: aura-pulse-red 1s ease-in-out infinite; }
      .status-aura.blue { animation: aura-pulse-blue 1s ease-in-out infinite; }

      /* Outline glows that follow emoji glyphs */
      .aura-outline-red {
        text-shadow:
          0 0 6px rgba(231,76,60,0.7),
          0 0 12px rgba(231,76,60,0.6),
          0 0 18px rgba(231,76,60,0.5);
        filter: drop-shadow(0 0 6px rgba(231,76,60,0.35));
      }
      .aura-outline-blue {
        text-shadow:
          0 0 6px rgba(52,152,219,0.7),
          0 0 12px rgba(52,152,219,0.6),
          0 0 18px rgba(52,152,219,0.5);
        filter: drop-shadow(0 0 6px rgba(52,152,219,0.35));
      }

      /* CSS Runner Character */
      .css-runner {
        position: relative;
        width: 40px;
        height: 60px;
        margin: 0 auto;
      }

      /* Head */
      .runner-head {
        position: absolute;
        top: 0;
        left: 50%;
        transform: translateX(-50%);
        width: 12px;
        height: 12px;
        background: #FFB366;
        border-radius: 50%;
        border: 2px solid #333;
      }

      /* Body */
      .runner-body {
        position: absolute;
        top: 12px;
        left: 50%;
        transform: translateX(-50%);
        width: 8px;
        height: 20px;
        background: #4A90E2;
        border-radius: 4px;
      }

      /* Team Colors */
      .css-runner.team-red .runner-body {
        background: #FF5E5E;
      }
      .css-runner.team-blue .runner-body {
        background: #5B9DFF;
      }

      /* Arms */
      .runner-arm {
        position: absolute;
        top: 15px;
        width: 3px;
        height: 12px;
        background: #FFB366;
        border-radius: 2px;
        transform-origin: top center;
      }
      .runner-arm.left {
        left: 8px;
      }
      .runner-arm.right {
        right: 8px;
      }

      /* Legs */
      .runner-leg {
        position: absolute;
        top: 30px;
        width: 4px;
        height: 15px;
        background: #333;
        border-radius: 2px;
        transform-origin: top center;
      }
      .runner-leg.left {
        left: 14px;
      }
      .runner-leg.right {
        right: 14px;
      }

      /* Feet */
      .runner-foot {
        position: absolute;
        bottom: -3px;
        width: 8px;
        height: 3px;
        background: #333;
        border-radius: 2px;
        left: -2px;
      }

      /* Running Animation */
      @keyframes run-cycle {
        0% {
          transform: translateY(0);
        }
        25% {
          transform: translateY(-4px);
        }
        50% {
          transform: translateY(0);
        }
        75% {
          transform: translateY(-2px);
        }
        100% {
          transform: translateY(0);
        }
      }

      @keyframes leg-run-left {
        0% { transform: rotate(20deg); }
        25% { transform: rotate(-10deg); }
        50% { transform: rotate(-20deg); }
        75% { transform: rotate(10deg); }
        100% { transform: rotate(20deg); }
      }

      @keyframes leg-run-right {
        0% { transform: rotate(-20deg); }
        25% { transform: rotate(10deg); }
        50% { transform: rotate(20deg); }
        75% { transform: rotate(-10deg); }
        100% { transform: rotate(-20deg); }
      }

      @keyframes arm-run-left {
        0% { transform: rotate(-15deg); }
        50% { transform: rotate(15deg); }
        100% { transform: rotate(-15deg); }
      }

      @keyframes arm-run-right {
        0% { transform: rotate(15deg); }
        50% { transform: rotate(-15deg); }
        100% { transform: rotate(15deg); }
      }

      /* Emoji Runner Animations (fallback) */
      @keyframes runner-bob {
        0%, 100% { transform: translateY(0) scaleX(1); }
        25% { transform: translateY(-8px) scaleX(1.05) rotate(-2deg); }
        75% { transform: translateY(-4px) scaleX(0.95) rotate(2deg); }
      }
      @keyframes cheer-jump {
        0%, 100% { transform: translateY(0) scale(1) rotate(0deg); }
        50% { transform: translateY(-25px) scale(1.2) rotate(10deg); }
      }
      
      /* Confetti Animation */
      @keyframes confetti-fall {
        0% { transform: translateY(-100px) rotateZ(0deg); opacity: 1; }
        100% { transform: translateY(800px) rotateZ(360deg); opacity: 0; }
      }
      .confetti {
        position: absolute;
        top: 0;
        width: 10px;
        height: 10px;
        animation: confetti-fall 3s linear infinite;
      }
      
      /* GO Button Pulse Animation */
      @keyframes go-pulse {
        0% { transform: scale(1); }
        50% { transform: scale(1.05); }
        100% { transform: scale(1); }
      }


      .animation-shield-pulse { animation: shield-pulse 1.5s infinite; }
      .animation-slowed-pulse { animation: slowed-pulse 1s infinite; }
      .animation-shake { animation: shake 0.5s; }
      .animation-item-appear { animation: item-appear 0.5s forwards; }
      .animation-item-disappear { animation: item-disappear 0.5s forwards; }
      .animation-runner-bob { animation: runner-bob 0.3s infinite ease-in-out; }
      .animation-cheer-jump { animation: cheer-jump 0.8s infinite; }
      .animation-go-pulse { animation: go-pulse 1.5s infinite; }

      /* Utility classes for light glow based on active state */
      .glow-red { --glow-color: rgba(231,76,60,0.9); animation: light-glow 1.2s ease-in-out infinite; }
      .glow-yellow { --glow-color: rgba(241,196,15,0.9); animation: light-glow 0.9s ease-in-out infinite; }
      .glow-green { --glow-color: rgba(46,204,113,0.9); animation: light-glow 0.9s ease-in-out infinite; }

      /* CSS Runner Animations */
      .css-runner.running {
        animation: run-cycle 0.4s infinite ease-in-out;
      }
      .css-runner.running .runner-leg.left {
        animation: leg-run-left 0.4s infinite ease-in-out;
      }
      .css-runner.running .runner-leg.right {
        animation: leg-run-right 0.4s infinite ease-in-out;
      }
      .css-runner.running .runner-arm.left {
        animation: arm-run-left 0.4s infinite ease-in-out;
      }
      .css-runner.running .runner-arm.right {
        animation: arm-run-right 0.4s infinite ease-in-out;
      }
    </style>
  <script type="importmap">
{
  "imports": {
    "react": "https://esm.sh/react@^19.1.1",
    "react-dom/": "https://esm.sh/react-dom@^19.1.1/",
    "react/": "https://esm.sh/react@^19.1.1/",
    "@google/genai": "https://esm.sh/@google/genai@^1.15.0"
  }
}
</script>
<link rel="stylesheet" href="/index.css">
</head>
  <body>
    <noscript>You need to enable JavaScript to run this app.</noscript>
    <div id="root"></div>
    <script type="module" src="/index.tsx"></script>
  </body>
</html>